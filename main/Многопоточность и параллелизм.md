Многопоточность и параллелизм — это ключевые концепции программирования для современных многоядерных процессоров. Они позволяют программе выполнять несколько операций одновременно, тем самым повышая производительность и эффективность. Многопоточность реализует параллельное выполнение программных потоков (threads) в одном процессе, в то время как параллелизм часто подразумевает выполнение независимых задач на разных ядрах процессора. C++ предоставляет мощные средства для работы с многопоточностью, такие как `std::thread`, `std::async`, мьютексы, условные переменные и атомарные операции.

## Содержание

1. [Потоки и задачи (std::thread, std::async)](Многопоточность%20и%20параллелизм/Потоки%20и%20задачи.md)
2. [Мьютексы и условные переменные](Многопоточность%20и%20параллелизм/Мьютексы%20и%20условные%20переменные.md)
3. [Атомарные операции и память (std::atomic)](Многопоточность%20и%20параллелизм/Атомарные%20операции.md)

---

### 1. Потоки и задачи (std::thread, std::async)

Потоки (threads) позволяют параллельно выполнять несколько задач в рамках одного процесса. C++ предоставляет класс `std::thread`, который позволяет запускать отдельные потоки выполнения. Кроме того, с помощью `std::async` можно запускать задачи в параллельном режиме и управлять их результатами.

**Ключевые моменты:**
- Создание и управление потоками с помощью `std::thread`.
- Использование `std::async` для асинхронного выполнения задач.
- Совместное использование данных между потоками.

Пример создания потока:

```cpp
#include <iostream>
#include <thread>

void task() {
    std::cout << "Task running in thread" << std::endl;
}

int main() {
    std::thread t(task);  // Запуск потока
    t.join();  // Ожидание завершения потока
}
```

Читать дальше: [Потоки и задачи (std::thread, std::async)](Многопоточность%20и%20параллелизм/Потоки%20и%20задачи.md)

---

### 2. Мьютексы и условные переменные

Когда несколько потоков одновременно работают с общими данными, может возникнуть ситуация гонки данных (data race), что приводит к некорректному поведению программы. Для предотвращения таких ситуаций используются мьютексы (mutex) и условные переменные. Мьютексы позволяют синхронизировать доступ к общим ресурсам, блокируя доступ другим потокам, пока один поток использует ресурс. Условные переменные используются для координации потоков на основе определённых условий.

**Ключевые моменты:**
- Использование `std::mutex` для защиты критических секций.
- Координация потоков с помощью `std::condition_variable`.
- Избежание блокировок и гонок данных.

Пример использования мьютекса:

```cpp
#include <iostream>
#include <thread>
#include <mutex>

std::mutex mtx;

void print_message(const std::string& message) {
    std::lock_guard<std::mutex> lock(mtx);  // Автоматическая блокировка мьютекса
    std::cout << message << std::endl;
}

int main() {
    std::thread t1(print_message, "Hello from thread 1");
    std::thread t2(print_message, "Hello from thread 2");

    t1.join();
    t2.join();
}
```

Читать дальше: [Мьютексы и условные переменные](Многопоточность%20и%20параллелизм/Мьютексы%20и%20условные%20переменные.md)

---

### 3. Атомарные операции и память (std::atomic)

Атомарные операции — это операции, которые выполняются за один неделимый шаг. Атомарность гарантирует, что операция будет завершена целиком, и никакие другие потоки не смогут увидеть промежуточные состояния. Это особенно важно при работе с разделяемыми переменными в многопоточных приложениях. C++ предоставляет типы данных и операции для работы с атомарными переменными через шаблон `std::atomic`.

**Ключевые моменты:**
- Использование `std::atomic` для обеспечения атомарности операций.
- Управление порядком операций с помощью атомарных флагов и операций.
- Эффективное использование многопоточности без блокировок.

Пример использования атомарных переменных:

```cpp
#include <iostream>
#include <thread>
#include <atomic>

std::atomic<int> counter(0);

void increment() {
    for (int i = 0; i < 1000; ++i) {
        counter++;
    }
}

int main() {
    std::thread t1(increment);
    std::thread t2(increment);

    t1.join();
    t2.join();

    std::cout << "Final counter value: " << counter << std::endl;
}
```

Читать дальше: [Атомарные операции и память (std::atomic)](Многопоточность%20и%20параллелизм/Атомарные%20операции.md)

---

Многопоточность и параллелизм являются важными инструментами для создания производительных приложений. C++ предлагает гибкие и мощные средства для работы с потоками, синхронизацией и атомарными операциями, что позволяет создавать безопасные и эффективные многопоточные программы.